<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Ethereum Token Tracer</title>
    <!-- load stylesheets -->
    <link href="stylesheets/query/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet"><!-- Font Awesome -->
    <link href="stylesheets/query/css/bootstrap.min.css" rel="stylesheet"><!-- Bootstrap style -->
    <link href="stylesheets/query/css/datepicker.css" rel="stylesheet" type="text/css">
    <link href="stylesheets/query/css/templatemo-style.css" rel="stylesheet"><!-- Templatemo style -->
    <!-- For Table -->
    <!--===============================================================================================-->
    <link href="stylesheets/section_table/css/main.css" rel="stylesheet" type="text/css">
    <!--===============================================================================================-->
</head>

<body>
    <div class="tm-page-wrap mx-auto">
        <section class="tm-banner">
            <div class="tm-container-outer tm-banner-bg">
                <div class="container">
                    <div class="row tm-banner-row tm-banner-row-header">
                        <div class="col-xs-12">
                            <div class="tm-banner-header">
                                <h1 class="text-uppercase tm-banner-title">A Decentralized Digital Currency Tracing Service</h1><img alt="Dots" src="stylesheets/query/img/dots-3.png">
                                <p class="tm-banner-subtitle">Your token transfer Txns are here</p><a class="tm-down-arrow-link" href="javascript:void(0)"><i class="fa fa-2x fa-angle-down tm-down-arrow"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="row tm-banner-row" id="tm-section-search">
                        <form class="tm-search-form tm-section-pad-2">
                            <div class="form-row tm-search-form-row">
                                <!-- <div class="form-group tm-form-group tm-form-group-pad tm-form-group-1">
                                    <label>Choose Your Query Method</label>
                                    <select class="form-control tm-select" id="method">
                                        <option selected value="0">
                                            Query by Time Duration
                                        </option>
                                        <option value="1">
                                            Query by Block Height
                                        </option>
                                    </select>
                                </div> -->
                                <div class="form-group tm-form-group tm-form-group-1">
                                    <div class="form-group tm-form-group tm-form-group-pad tm-form-group-2">
                                        <label class="label-group-2">ERC-20 Tokens</label> <select class="form-control tm-select" id="tokenList">
                                        </select>
                                    </div>
                                    <div class="form-group tm-form-group tm-form-group-pad tm-form-group-2">
                                        <label class="label-group-2">Txn Tracer Address</label> <input class="form-control" id="tracerAddress" type="text" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row tm-search-form-row">
                                <!-- <div class="form-group tm-form-group tm-form-group-pad tm-form-group-3">
                                    <label id="searchLabel1">Query from Date</label> <input class="form-control" id="searchFromDate" placeholder="Start Date" type="text"> <input class="form-control" id="searchFromHeight" placeholder="Start Block Height" type="number">
                                    <label>Sender</label> <input class="form-control" id="searchForSender" placeholder="Sender Address" type="text">
                                </div>
                                <div class="form-group tm-form-group tm-form-group-pad tm-form-group-3">
                                    <label id="searchLabel2">Query to Date</label> <input class="form-control" id="searchToDate" placeholder="End Date" type="text"> <input class="form-control" id="searchToHeight" placeholder="End Block Height" type="number">
                                    <label>Receiver</label> <input class="form-control" id="searchForReceiver" placeholder="Receiver Address" type="text">
                                </div> -->
                                <div class="form-group tm-form-group tm-form-group-pad tm-form-group-3">
                                    <label class="label-group-3">Sync Block Height</label> <input class="form-control" id="syncBlock" type="text" readonly>
                                </div>
                                <div class="form-group tm-form-group tm-form-group-pad tm-form-group-3">
                                    <label class="label-group-3">Sync Txn Count</label> <input class="form-control" id="syncTxnCount" type="text" readonly>
                                </div>
                                <div class="form-group tm-form-group tm-form-group-pad tm-form-group-3">
                                    <label class="label-group-3">Sync Status</label> <input class="form-control" id="oraclizeStatus" type="text" readonly>
                                </div>
                                <!-- <div class="form-group tm-form-group tm-form-group-pad tm-form-group-3">
                                    <label>&nbsp;</label> <button class="btn btn-primary tm-btn tm-btn-search text-uppercase" type="button" id="searchButton">Show all Txn</button>
                                </div> -->
                            </div>
                        </form>
                        <div class="form-group tm-form-group tm-form-group-pad tm-form-group-3 btn-query">
                            <div align="left" style="float:left;width:150px;">
                                <label>&nbsp;</label> <button class="btn btn-primary tm-btn tm-btn-search text-uppercase" type="button" id="searchButton">Show all Txn</button>
                            </div>
                            <div align="right" style="float:right;width:150px">
                                <label>&nbsp;</label> <button class="btn btn-primary tm-btn tm-btn-search text-uppercase" type="button" id="clearButton">Clear</button>
                            </div>
                        </div>
                    </div>
                    <div class="tm-banner-overlay"></div>
                </div>
            </div>
        </section>
        <section class="p-5 tm-container-outer tm-bg-gray section_title">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 mx-auto tm-about-text-wrap text-center">
                    </div>
                </div>
            </div>
        </section>
    </div>
    <div class="section_table">
        <section class="wrapper">
            <main class="_row title">
                <ul>
                    <li>Txn Hash</li>
                    <li>Block
                        <img src="stylesheets/query/img/search.png" class="search-icon" id="queryFromBlock">
                        <div class="dialog" id="block_dialog">
                            <h3>Please enter the block height to query</h3>
                            <p>fromBlock : <input type="number" class="dialog_input" id="fromBlock" min="0" value="0" placeholder="Default: 0" /></p>
                            <p>toBlock : <input type="number" class="dialog_input" id="toBlock" min="0" placeholder="Default: latest" /></p>
                        </div>
                    </li>
                    <li>Date Time
                        <img src="stylesheets/query/img/search.png" class="search-icon" id="queryStartTime">
                        <div class="dialog" id="date_dialog">
                            <h3>Please pick up the date to query</h3>
                            <p>fromDate : <input type="text" class="dialog_input" id="fromDate" value="Jul 30 2015" placeholder="Default: Jul 30 2015" /></p>
                            <p>toDate : <input type="text" class="dialog_input" id="toDate" placeholder="Default: latest" /></p>
                        </div>
                    </li>
                    <li>From
                        <img src="stylesheets/query/img/search.png" class="search-icon" id="querySender">
                        <div class="dialog" id="from_dialog">
                            <h3>Please enter the address to query</h3>
                            <p>Search by address: <input type="text" class="dialog_input" id="from" placeholder="0x..." /></p>
                        </div>
                    </li>
                    <li>To
                        <img src="stylesheets/query/img/search.png" class="search-icon" id="queryReceiver">
                        <div class="dialog" id="to_dialog">
                            <h3>Please enter the address to query</h3>
                            <p>Search by address: <input type="text" class="dialog_input" id="to" placeholder="0x..." /></p>
                        </div>
                    </li>
                    <li>Quantity</li>
                </ul>
            </main>
        </section>
    </div>
    <!-- load JS files -->
    <script src="stylesheets/query/js/jquery-1.11.3.min.js">
    </script> <!-- jQuery (https://jquery.com/download/) -->
    <script src="stylesheets/query/js/popper.min.js">
    </script> <!-- https://popper.js.org/ -->
    <script src="stylesheets/query/js/bootstrap.min.js">
    </script> <!-- https://getbootstrap.com/ -->
    <script src="stylesheets/query/js/datepicker.min.js">
    </script> <!-- https://github.com/qodesmith/datepicker -->
    <script src="stylesheets/query/js/jquery.singlePageNav.min.js">
    </script> <!-- Single Page Nav (https://github.com/ChrisWojcik/single-page-nav) -->
    <script src="stylesheets/query/js/jquery.scrollTo.min.js">
    </script> <!-- https://github.com/flesler/jquery.scrollTo -->
    <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css" />
    <script>
    $(function() {
        $('.section_table').hide();

        // Smooth scroll to search form
        $('.tm-down-arrow-link').click(function() {
            $.scrollTo('#tm-section-search', 300, { easing: 'linear' });
        });

        $.get('/getTokens', function(tokens) {
            for (let token of tokens) {
                $('#tokenList').append(`<option value="${token}">${token}</option>`);
            }

            $.post('/getTracer', {
                tokenAddress: $('#tokenList').val()
            }, function(result) {
                updateInfo(result);
            })
        })

        $('#tokenList').change(function() {
            $.post('/getTracer', {
                tokenAddress: $('#tokenList').val()
            }, function(result) {
                updateInfo(result);
            })
        })

        var resultIndex = 1;
        var repeatQuery = null;

        function updateInfo(result) {
            $('#tracerAddress').val(result.tracer);
            $('#syncBlock').val(result.syncBlock);
            $('#syncTxnCount').val(result.syncTxnCount);
            if (result.oraclizeStatus) {
                $('#oraclizeStatus').val('Running');
                $('#oraclizeStatus').attr('style', 'background-color: #26D07C');
            } else {
                $('#oraclizeStatus').val('Pause');
                $('#oraclizeStatus').attr('style', 'background-color: #E73C3E');
            }

            clear();
        }

        $('#clearButton').click(function() {
            clear();
        });

        function clear() {
            $('.result').remove();
            $('.section_table').hide();

            $('#fromBlock').val('0');
            $('#toBlock').val('');
            $('#fromDate').val('Jul 30 2015');
            $('#toDate').val('');
            $('#from').val('');
            $('#to').val('');

            clearInterval(repeatQuery);
            repeatQuery = null;
            resultIndex = 1;
        }

        $('#searchButton').click(function() {
            $('.result').remove();
            $('.section_table').hide();

            clearInterval(repeatQuery);
            repeatQuery = null;
            resultIndex = 1;

            repeatQuery = setInterval(function() {
                $.ajax({
                    url: "searchAll",
                    type: "POST",
                    cache: false,
                    data: {
                        tracerAddress: $('#tracerAddress').val(),
                        indexFrom: resultIndex
                    },
                    success: function(result) {
                        display(result);
                    }
                });
            }, 1500);
        })

        $('#queryFromBlock').click(function(e) {
            $('#block_dialog').dialog('open');
            e.preventDefault();
        })

        $('#block_dialog').dialog({
            width: 320,
            height: 210,
            autoOpen: false,
            modal: true,
            resizable: false,
            draggable: false,
            buttons: [{
                text: 'filter',
                click: function() {
                    filterButton();
                    $(this).dialog("close");
                }
            }, {
                text: 'clear',
                click: function() {
                    $('#fromBlock').val('');
                    $('#toBlock').val('');
                }
            }],
            open: function(event, ui) {
                $('.ui-widget-overlay').bind('click', function() {
                    $("#block_dialog").dialog('close');
                    $('#fromBlock').val('');
                    $('#toBlock').val('');
                });
            },
            position: {
                my: 'center',
                at: 'center',
                of: $('#queryFromBlock')
            }
        });

        // Date Picker in Search form
        var pickerFrom = datepicker('#fromDate');
        var pickerTo = datepicker('#toDate');
        $('#queryStartTime').click(function() {
            $('#date_dialog').dialog('open');
            e.preventDefault();
        })

        $('#date_dialog').dialog({
            width: 550,
            height: 400,
            autoOpen: false,
            modal: true,
            resizable: false,
            draggable: false,
            buttons: [{
                text: 'filter',
                click: function() {
                    filterButton();
                    $(this).dialog("close");
                }
            }, {
                text: 'clear',
                click: function() {
                    $('#fromDate').val('');
                    $('#toDate').val('');
                }
            }],
            open: function(event, ui) {
                $('.ui-widget-overlay').bind('click', function() {
                    $("#date_dialog").dialog('close');
                    $('#fromDate').val('');
                    $('#toDate').val('');
                });
            },
            position: {
                my: 'center',
                at: 'center',
                of: $('#queryStartTime')
            }
        });

        $('#querySender').click(function(e) {
            $('#from_dialog').dialog('open');
            e.preventDefault();
        })

        $('#from_dialog').dialog({
            width: 320,
            autoOpen: false,
            modal: true,
            resizable: false,
            draggable: false,
            buttons: [{
                text: 'filter',
                click: function() {
                    filterButton();
                    $(this).dialog("close");
                }
            }, {
                text: 'clear',
                click: function() {
                    $('#from').val('');
                }
            }],
            open: function(event, ui) {
                $('.ui-widget-overlay').bind('click', function() {
                    $("#from_dialog").dialog('close');
                    $('#from').val('');
                });
            },
            position: {
                my: 'center',
                at: 'center',
                of: $('#querySender')
            }
        });

        $('#queryReceiver').click(function(e) {
            $('#to_dialog').dialog('open');
            e.preventDefault();
        })

        $('#to_dialog').dialog({
            width: 320,
            autoOpen: false,
            modal: true,
            resizable: false,
            draggable: false,
            buttons: [{
                text: 'filter',
                click: function() {
                    filterButton();
                    $(this).dialog("close");
                }
            }, {
                text: 'clear',
                click: function() {
                    $('#to').val('');
                }
            }],
            open: function(event, ui) {
                $('.ui-widget-overlay').bind('click', function() {
                    $("#to_dialog").dialog('close');
                    $('#to').val('');
                });
            },
            position: {
                my: 'center',
                at: 'center',
                of: $('#queryReceiver')
            }
        });

        var checkPoint = 0;

        function filterButton() {
            $('.result').remove();
            $('.section_table').hide();

            clearInterval(repeatQuery);
            repeatQuery = null;
            resultIndex = 1;

            checkPoint = 0;
            if ($('#toBlok').val() != "" && $('#toDate').val() != "") {
                alert('You can only do one range query in time. Please check the query input again!')
            } else {
                if ($('#fromDate').val() != "" && $('#toDate').val() != "") {
                    if ((new Date($('#fromDate').val()).getTime()) < (new Date($('#toDate').val()).getTime())) {
                        if ($('#from').val() != "" && $('#to').val() != "") {
                            $.post('/searchDateBoth', {
                                tracerAddress: $('#tracerAddress').val(),
                                fromDate: (new Date($('#fromDate').val()).getTime()) / 1000,
                                toDate: (new Date($('#toDate').val()).getTime()) / 1000,
                                from: $('#from').val(),
                                to: $('#to').val()
                            }, function(result) {
                                display(result);
                            })
                        } else if ($('#from').val() != "") {
                            repeatQuery = setInterval(function() {
                                $.ajax({
                                    url: "searchDateUser",
                                    type: "POST",
                                    cache: false,
                                    data: {
                                        tracerAddress: $('#tracerAddress').val(),
                                        fromDate: (new Date($('#fromDate').val()).getTime()) / 1000,
                                        toDate: (new Date($('#toDate').val()).getTime()) / 1000,
                                        user: $('#from').val(),
                                        searchType: 0,
                                        checkPoint: checkPoint
                                    },
                                    success: function(result) {
                                        display(result);
                                        checkPoint = result.checkPoint;
                                    }
                                });
                            }, 1500);
                        } else if ($('#to').val() != "") {
                            repeatQuery = setInterval(function() {
                                $.ajax({
                                    url: "searchDateUser",
                                    type: "POST",
                                    cache: false,
                                    data: {
                                        tracerAddress: $('#tracerAddress').val(),
                                        fromDate: (new Date($('#fromDate').val()).getTime()) / 1000,
                                        toDate: (new Date($('#toDate').val()).getTime()) / 1000,
                                        user: $('#to').val(),
                                        searchType: 1,
                                        checkPoint: checkPoint
                                    },
                                    success: function(result) {
                                        display(result);
                                        checkPoint = result.checkPoint;
                                    }
                                });
                            }, 1500);
                        } else {
                            repeatQuery = setInterval(function() {
                                $.ajax({
                                    url: "searchDate",
                                    type: "POST",
                                    cache: false,
                                    data: {
                                        tracerAddress: $('#tracerAddress').val(),
                                        fromDate: (new Date($('#fromDate').val()).getTime()) / 1000,
                                        toDate: (new Date($('#toDate').val()).getTime()) / 1000,
                                        checkPoint: checkPoint
                                    },
                                    success: function(result) {
                                        display(result);
                                        checkPoint = result.checkPoint;
                                    }
                                });
                            }, 1500);
                        }
                    } else {
                        alert('Error! 請輸入正確之時間範圍');
                    }
                } else if ($('#fromBlock').val() != "" && $('#toBlock').val() != "") {
                    if ($('#fromBlock').val() < $('#toBlock').val()) {
                        if ($('#from').val() != "" && $('#to').val() != "") {
                            $.post('/searchHeightBoth', {
                                tracerAddress: $('#tracerAddress').val(),
                                fromBlock: $('#fromBlock').val(),
                                toBlock: $('#toBlock').val(),
                                from: $('#from').val(),
                                to: $('#to').val()
                            }, function(result) {
                                display(result);
                            })
                        } else if ($('#from').val() != "") {
                            repeatQuery = setInterval(function() {
                                $.ajax({
                                    url: "searchHeightUser",
                                    type: "POST",
                                    cache: false,
                                    data: {
                                        tracerAddress: $('#tracerAddress').val(),
                                        fromBlock: $('#fromBlock').val(),
                                        toBlock: $('#toBlock').val(),
                                        user: $('#from').val(),
                                        searchType: 0,
                                        checkPoint: checkPoint
                                    },
                                    success: function(result) {
                                        display(result);
                                        checkPoint = result.checkPoint;
                                    }
                                });
                            }, 1500);
                        } else if ($('#to').val() != "") {
                            repeatQuery = setInterval(function() {
                                $.ajax({
                                    url: "searchHeightUser",
                                    type: "POST",
                                    cache: false,
                                    data: {
                                        tracerAddress: $('#tracerAddress').val(),
                                        fromBlock: $('#fromBlock').val(),
                                        toBlock: $('#toBlock').val(),
                                        user: $('#to').val(),
                                        searchType: 1,
                                        checkPoint: checkPoint
                                    },
                                    success: function(result) {
                                        display(result);
                                        checkPoint = result.checkPoint;
                                    }
                                });
                            }, 1500);
                        } else {
                            repeatQuery = setInterval(function() {
                                $.ajax({
                                    url: "searchHeight",
                                    type: "POST",
                                    cache: false,
                                    data: {
                                        tracerAddress: $('#tracerAddress').val(),
                                        fromBlock: $('#fromBlock').val(),
                                        toBlock: $('#toBlock').val(),
                                        checkPoint: checkPoint
                                    },
                                    success: function(result) {
                                        display(result);
                                        checkPoint = result.checkPoint;
                                    }
                                });
                            }, 1500);
                        }
                    } else {
                        alert('Error! 請輸入正確之區塊範圍');
                    }
                }
            }
        }

        // var checkPoint = 0;
        // $('#searchButton').click(function() {
        //     $('.result').remove();
        //     $('.section_table').hide();

        //     clearInterval(repeatQuery);
        //     repeatQuery = null;
        //     resultIndex = 1;

        //     checkPoint = 0;
        //     if ($('#method').val() == 0) {
        //         if ($('#searchFromDate').val().length < 10 || $('#searchToDate').val().length < 10) {
        //             alert('Error! 請輸入正確的時間日期')
        //         } else {
        //             if ($('#searchFromDate').val() != "" && $('#searchToDate').val() != "") {
        //                 if ((new Date($('#searchFromDate').val()).getTime()) < (new Date($('#searchToDate').val()).getTime())) {
        //                     if ($('#searchForSender').val() != "" && $('#searchForReceiver').val() != "") {
        //                         $.post('/searchDateBoth', {
        //                             tracerAddress: $('#tracerAddress').val(),
        //                             searchFromDate: (new Date($('#searchFromDate').val()).getTime()) / 1000,
        //                             searchToDate: (new Date($('#searchToDate').val()).getTime()) / 1000,
        //                             fromUser: $('#searchForSender').val(),
        //                             toUser: $('#searchForReceiver').val()
        //                         }, function(result) {
        //                             display(result);
        //                         })
        //                     } else if ($('#searchForSender').val() != "") {
        //                         repeatQuery = setInterval(function() {
        //                             $.ajax({
        //                                 url: "searchDateUser",
        //                                 type: "POST",
        //                                 cache: false,
        //                                 data: {
        //                                     tracerAddress: $('#tracerAddress').val(),
        //                                     searchFromDate: (new Date($('#searchFromDate').val()).getTime()) / 1000,
        //                                     searchToDate: (new Date($('#searchToDate').val()).getTime()) / 1000,
        //                                     user: $('#searchForSender').val(),
        //                                     searchType: 0,
        //                                     checkPoint: checkPoint
        //                                 },
        //                                 success: function(result) {
        //                                     display(result);
        //                                     checkPoint = result.checkPoint;
        //                                 }
        //                             });
        //                         }, 1500);
        //                     } else if ($('#searchForReceiver').val() != "") {
        //                         repeatQuery = setInterval(function() {
        //                             $.ajax({
        //                                 url: "searchDateUser",
        //                                 type: "POST",
        //                                 cache: false,
        //                                 data: {
        //                                     tracerAddress: $('#tracerAddress').val(),
        //                                     searchFromDate: (new Date($('#searchFromDate').val()).getTime()) / 1000,
        //                                     searchToDate: (new Date($('#searchToDate').val()).getTime()) / 1000,
        //                                     user: $('#searchForSender').val(),
        //                                     searchType: 1,
        //                                     checkPoint: checkPoint
        //                                 },
        //                                 success: function(result) {
        //                                     display(result);
        //                                     checkPoint = result.checkPoint;
        //                                 }
        //                             });
        //                         }, 1500);
        //                     } else {
        //                         repeatQuery = setInterval(function() {
        //                             $.ajax({
        //                                 url: "searchDate",
        //                                 type: "POST",
        //                                 cache: false,
        //                                 data: {
        //                                     tracerAddress: $('#tracerAddress').val(),
        //                                     searchFromDate: (new Date($('#searchFromDate').val()).getTime()) / 1000,
        //                                     searchToDate: (new Date($('#searchToDate').val()).getTime()) / 1000,
        //                                     checkPoint: checkPoint
        //                                 },
        //                                 success: function(result) {
        //                                     display(result);
        //                                     checkPoint = result.checkPoint;
        //                                 }
        //                             });
        //                         }, 1500);
        //                     }
        //                 } else {
        //                     alert('Error! 請輸入正確之時間範圍');
        //                 }
        //             } else {
        //                 alert('Error! 請輸入欲搜索之時間範圍');
        //             }
        //         }
        //     } else {
        //         if ($('#searchFromHeight').val() != "" && $('#searchToHeight').val() != "") {
        //             if ($('#searchFromHeight').val() < $('#searchToHeight').val()) {
        //                 if ($('#searchForSender').val() != "" && $('#searchForReceiver').val() != "") {
        //                     $.post('/searchHeightBoth', {
        //                         tracerAddress: $('#tracerAddress').val(),
        //                         searchFromHeight: $('#searchFromHeight').val(),
        //                         searchToHeight: $('#searchToHeight').val(),
        //                         fromUser: $('#searchForSender').val(),
        //                         toUser: $('#searchForReceiver').val()
        //                     }, function(result) {
        //                         display(result);
        //                     })
        //                 } else if ($('#searchForSender').val() != "") {
        //                     repeatQuery = setInterval(function() {
        //                         $.ajax({
        //                             url: "searchHeightUser",
        //                             type: "POST",
        //                             cache: false,
        //                             data: {
        //                                 tracerAddress: $('#tracerAddress').val(),
        //                                 searchFromHeight: $('#searchFromHeight').val(),
        //                                 searchToHeight: $('#searchToHeight').val(),
        //                                 user: $('#searchForSender').val(),
        //                                 searchType: 0,
        //                                 checkPoint: checkPoint
        //                             },
        //                             success: function(result) {
        //                                 display(result);
        //                                 checkPoint = result.checkPoint;
        //                             }
        //                         });
        //                     }, 1500);
        //                 } else if ($('#searchForReceiver').val() != "") {
        //                     repeatQuery = setInterval(function() {
        //                         $.ajax({
        //                             url: "searchHeightUser",
        //                             type: "POST",
        //                             cache: false,
        //                             data: {
        //                                 tracerAddress: $('#tracerAddress').val(),
        //                                 searchFromHeight: $('#searchFromHeight').val(),
        //                                 searchToHeight: $('#searchToHeight').val(),
        //                                 user: $('#searchForSender').val(),
        //                                 searchType: 1,
        //                                 checkPoint: checkPoint
        //                             },
        //                             success: function(result) {
        //                                 display(result);
        //                                 checkPoint = result.checkPoint;
        //                             }
        //                         });
        //                     }, 1500);
        //                 } else {
        //                     repeatQuery = setInterval(function() {
        //                         $.ajax({
        //                             url: "searchHeight",
        //                             type: "POST",
        //                             cache: false,
        //                             data: {
        //                                 tracerAddress: $('#tracerAddress').val(),
        //                                 searchFromHeight: $('#searchFromHeight').val(),
        //                                 searchToHeight: $('#searchToHeight').val(),
        //                                 checkPoint: checkPoint
        //                             },
        //                             success: function(result) {
        //                                 display(result);
        //                                 checkPoint = result.checkPoint;
        //                             }
        //                         });
        //                     }, 1500);
        //                 }
        //             } else {
        //                 alert('Error! 請輸入正確之區塊範圍');
        //             }
        //         } else {
        //             alert('Error! 請輸入欲搜索之區塊範圍');
        //         }
        //     }
        // })

        function display(result) {
            $('.section_table').show();

            for (var i = 0; i < result.txn.length; i++) {
                $('.wrapper').append(`<article class="_row result"><ul><li class="content">${result.txn[i]}</li><li>${result.block[i]}</li><li>${result.timeStamp[i]}</li><li>${result.from[i]}</li><li>${result.to[i]}</li><li>${result.quantity[i]}</li></ul><ul class="more-content"><li>Transaction Hash: ${result.txn[i]}<br>Block Number: ${result.block[i]}<br>Time: ${timeStamp2String(result.timeStamp[i])}<br>From: ${result.from[i]}<br>To: ${result.to[i]}<br>Quantity: ${result.quantity[i]}</li></ul></article>`);
                resultIndex++;
            }
        }

        function timeStamp2String(time) {
            var ts = new Date();
            ts.setTime(time * 1000);
            return ts.toString();
        }

    });
    </script>
</body>

</html>